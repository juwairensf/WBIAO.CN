<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>注册</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/register.css">
</head>
<body>
    <header>
        <a href="##">
            <img src="img/login.img/logo-icon.png" alt=""/>
            <img src="img/register.img/slogan-0224.png" alt=""/>
        </a>
    </header>
    <section>
        <div class="reg">
           <div class="reg-b">
           		<form>
           			<div class="reg-b-top">
           				<h2>注册万表会员</h2>
           			</div>
                    <div class="reg-b-middle">
                    	<p>
                    		<input id="phone" type="text" placeholder="请输入手机号码" />
                    		<span id="yphone" class="active">请输入正确的手机号码</span>
                    	</p>
                    	<p>
                    		<input id="txt" type="text" placeholder="短信验证码" />
                    		<i id="btny">获取验证码</i>
                    		<span id="ybtn" class="active">请输入正确的手机号码</span>
                    	</p>
                    	<p>
                    		<input id="pwd" type="text" placeholder="请设置密码" />
                    		<span id="ypwd" class="active">请输入正确的密码</span>
                    	</p>
                    	<p>
                    		<input id="cpwd" type="text" placeholder="请再次输入密码" />
                    		<span id="ycpwd" class="active">两次输入的密码不一致</span>
                    	</p>
                    	<p>
                    		<input id="rphone" type="text" placeholder="如有推荐人，请填写推荐人手机号" />
                    		<span id="yrphone" class="active">请输入正确的手机号码</span>
                    	</p>
                    	<p><button id="btn" type="button">立即注册</button></p>
                    </div>
                    <div class="reg-b-bottom">
                    	<p>点击"立即注册"，即表示您同意并愿意遵守<span>万表网用户协议</span></p>
                    </div>
                </form>
           </div>
        </div>
    </section>
    <footer>
        <p>万表网名表商城 版权所有 2008-2017 ICP备案证书号:粤ICP备09108738号 网监备案:4401060103141</p>
        <p> 广州市万表科技股份有限公司 地址:广州市番禺区番禺大道北60-1号</p>
        <p> Copyright 2008-2017 WWW.WBIAO.CN.LTD ALL RIGHT RESERVED.</p>
	</footer>
	<script type="text/javascript" src="php/ajax.js" ></script>
    <script>
    	var oBtn = document.getElementById("btn");
    	oBtn.onclick=function(){
			//验证手机号；
			var oPhone = document.getElementById("phone");
    		function checkPhone(){ 
	    		
	    		var oSpan = document.getElementById("yphone");
			  	var pattern = /^1[34578]\d{9}$/; //验证手机号正则表达式 
			  	if(pattern.test(oPhone.value)){
			     	oSpan.style.display = "none";
			    	oSpan.className="";
			     	return true; 
			    	
			    } 
			   	else{
			    	oSpan.style.display = "block";
			    	oSpan.className="active"
			    	return false; 
			    } 
			} 
	    	checkPhone();
	    	
			//验证码；
			var oTxt = document.getElementById("txt");
	    	function verification(){
	    		
	    		var oYbtn = document.getElementById("ybtn");
	    		var vfc = /^\s{4}$/;
	    		if(vfc.test(oTxt.value)){
	    			oYbtn.style.display = "none";
	    			oYbtn.className = ""
	    			return true;
	    		}else{
	    			oYbtn.style.display = "block";
	    			oYbtn.className = "active";
	    			return false;
	    		}
			}
	    	
			//验证密码；
			var oPwd = document.getElementById("pwd");
    		function checkPassword(){ 
	    		
	    		var oYpwd = document.getElementById("ypwd");
			  	var pattern = /^\w{4,8}$/; //验证密码正则表达式 
			  	if(pattern.test(oPwd.value)){
			     	oYpwd.style.display = "none";
			    	oYpwd.className="";
			     	return true; 
			    	
			    } 
			   	else{
			    	oYpwd.style.display = "block";
			    	oYpwd.className="active"
			    	return false; 
			    } 
			} 
	    	checkPassword();
			//确认密码；
			var oCpwd = document.getElementById("cpwd");
    		function confirmPassword(){ 
    			var oPwd = document.getElementById("pwd");
	    		
	    		var oYcpwd = document.getElementById("ycpwd");
			  	if(oPwd.value === oCpwd.value){
			     	oYcpwd.style.display = "none";
			    	oYcpwd.className="";
			     	return true; 
			    } 
			   	else{
			    	oYcpwd.style.display = "block";
			    	oYcpwd.className="active"
			    	return false; 
			    } 
			} 
	    	confirmPassword();
	    	
			//验证推荐人手机号；
			var oRphone = document.getElementById("rphone");
			function rCheckPhone(){ 
	    		
	    		var oYrphone = document.getElementById("yrphone");
			  	var pattern = /^1[34578]\d{9}$/; //验证手机号正则表达式 
			  	if(pattern.test(oRphone.value)){
			     	oYrphone.style.display = "none";
			    	oYrphone.className="";
			     	return true; 
			    	
			    } 
			   	else{
			    	oYrphone.style.display = "block";
			    	oYrphone.className="active"
			    	return false; 
			    } 
			} 
			rCheckPhone();
			
			var url = "http://localhost/WBIAO.CN/php/register.php";
                    ajaxPost(url,`phone=${oPhone.value}&txt=${oTxt.value}&pwd=${oPwd.value}&cpwd=${oCpwd.value}&rphone=${oRphone.value}`)
                    .then(function(res){
                        console.log(res);
                    })
	    	
    	}
    	
    	
    	
    	//获取验证码；
    	var oBtny = document.getElementById("btny");
    	btny.onclick=function(){
			txt.value=showCode();
		}
		function showCode(){
			var str="";
			for(var i = 0;i<4;i++){
			 	// 0 ~ sLetter.length - 1;
				var sLetter="abcdefghigklmnopqrstuv_wxyz1234567890ABCDEFGHIGKLMNOPQRSTUVWXYZ";
				var randomLetter = sLetter[Math.round(Math.random()*(sLetter.length-1))];
				str=str+randomLetter;
			}
			return str;
		}
		
		
    </script>
</body>
</html>